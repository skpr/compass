BEGIN
{
    printf("Tracing PHP function calls... Hit Ctrl-C to end.\n");
}

uprobe:FILE:compass_function_begin
{
    @function[str(uptr(arg0))] = nsecs;
}

uprobe:FILE:compass_function_end
/ @function[str(uptr(arg0))] /
{
    delete(@function[str(uptr(arg0))])
}

uprobe:FILE:compass_request_init
{
    // Do stuff.
}

uprobe:FILE:compass_request_shutdown
{
    // Do stuff.
}

END
{
    clear(@function);
    printf("Finished tracing PHP function calls\n");
}
